<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.woolution.shop.mapper.CustMgtMapper">

    <!--임시로 admin_id 1로 고정-->
    <insert id="infoInsert">
        insert into cust (cust_nm, cust_no, cust_address, cust_sex, cust_birthDay, cust_createAT, cust_state,
                          cust_parent_nm, puppy_species_id)
        VALUES (#{cust_nm}, #{cust_no}, #{cust_address}, #{cust_sex}, #{cust_birthDay}, now(), true, #{cust_parent_nm},
                #{puppy_species_id})
    </insert>

    <select id="infoList" resultType="hashmap">
        select id,
               cust_nm,
               cust_no,
               cust_address,
               cust_sex,
               cust_birthDay,
               cust_createAT,
               cust_parent_nm,
               (select puppy_species_nm
                from puppy_species
                where puppy_species_id = puppy_species.id) as puppy_species_nm
        from cust
        where cust_state = true;
    </select>

    <update id="infoMod">
        update cust
        set cust_nm          = #{cust_nm},
            cust_no          = #{cust_no},
            cust_address     = #{cust_adrress},
            cust_sex         = #{cust_sex},
            cust_birthDay    = #{cust_birthDay},
            cust_parent_nm   = #{cust_parentNm},
            puppy_species_id = #{puppy_speciesId}
        where id = #{id}
    </update>

    <update id="infoDel">
        update cust
        set cust_state = false
        where id = #{id}
    </update>

    <insert id="infoSpeciesAdd">
        insert into puppy_species (puppy_species_nm)
        values (#{puppy_species_nm})
    </insert>

    <select id="infoSpecies" resultType="hashmap">
        select id, puppy_species_nm
        from puppy_species
    </select>

</mapper>